package com.dry3.controller.portal;import com.dry3.common.Const;import com.dry3.common.ResponseCode;import com.dry3.common.ServerResponse;import com.dry3.pojo.User;import com.dry3.service.IOrderService;import com.dry3.service.IUserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;import java.util.Map;/** * Created by dry3 */@Controller@RequestMapping("/order/")public class OrderController {    @Autowired    IOrderService iOrderService;    @RequestMapping(value = "pay.do",method = RequestMethod.GET)    @ResponseBody    public ServerResponse<Map> pay(Long orderNo, HttpSession session, HttpServletRequest request) {        User user = (User) session.getAttribute(Const.CURRENT_USER);        if (user == null) {            return ServerResponse.createByErrorCodeMessage(ResponseCode.ILLEGAL_ARGUMENT.getCode(), ResponseCode.ILLEGAL_ARGUMENT.getDesc());        }        String path = request.getSession().getServletContext().getRealPath("upload");        return iOrderService.pay(orderNo, path, user.getId());    }}