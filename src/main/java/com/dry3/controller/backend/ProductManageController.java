package com.dry3.controller.backend;import com.dry3.common.Const;import com.dry3.common.ResponseCode;import com.dry3.common.ServerResponse;import com.dry3.pojo.User;import com.dry3.service.IProductService;import com.dry3.service.IUserService;import com.github.pagehelper.PageInfo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpSession;/** * Created by dry3 */@Controller("/manage/product")public class ProductManageController {    @Autowired    private IUserService iUserService;    @Autowired    private IProductService iProductService;    @RequestMapping("list.do")    @ResponseBody    public ServerResponse<PageInfo> listProduct(HttpSession session, @RequestParam(value = "pageNum", defaultValue = "1") Integer pageNum, @RequestParam(value = "pageSize", defaultValue = "10") Integer pageSize) {        User user = (User)session.getAttribute(Const.CURRENT_USER);        if (user == null) {            return ServerResponse.createByErrorCodeMessage(ResponseCode.NEED_LOGIN.getCode(), "用户未登录,请登录");        }        if (iUserService.checkAdminRole(user).isSuccess()) {            //检验通过            return iProductService.listProduct(pageNum, pageSize);        }        return ServerResponse.createByErrorMessage("非管理员,无权限操作");    }}